---
import Card from "../ui/Card.astro";
---

<section id="testimonials">
    <div class="container">
        <div class="section-header">
            <h2 class="fade-up-testimonials">
                O que Dizem Nossos <span class="text-primary">Parceiros</span>
            </h2>
            <p class="fade-up-testimonials delay-1 section-desc">
                Resultados reais de quem confiou na Alpha Code.
            </p>
        </div>
        <div class="testimonials-grid">
            <Card variant="testimonial" class="testimonial-card-anim">
                <div class="stars">⭐⭐⭐⭐⭐</div>
                <div class="testimonial-text">
                    "Meu agendamento aumentou 40% no primeiro mês com o novo
                    site. O design passou exatamente a seriedade que eu queria."
                </div>
                <div class="testimonial-author">
                    <div class="author-info">
                        <h4>Dr. Carlos Mendes</h4>
                        <span class="author-role">Advogado Trabalhista</span>
                    </div>
                </div>
            </Card>
            <Card variant="testimonial" class="testimonial-card-anim">
                <div class="stars">⭐⭐⭐⭐⭐</div>
                <div class="testimonial-text">
                    "A landing page se pagou em 2 semanas. Muito rápida e
                    bonita, meus pacientes elogiam sempre."
                </div>
                <div class="testimonial-author">
                    <div class="author-info">
                        <h4>Mariana Costa</h4>
                        <span class="author-role">Psicóloga Clínica</span>
                    </div>
                </div>
            </Card>
            <Card variant="testimonial" class="testimonial-card-anim">
                <div class="stars">⭐⭐⭐⭐⭐</div>
                <div class="testimonial-text">
                    "Profissionalismo nota 10. O suporte foi incrível e o site
                    ficou pronto antes do prazo."
                </div>
                <div class="testimonial-author">
                    <div class="author-info">
                        <h4>Ricardo Alves</h4>
                        <span class="author-role">Diretor da Clínica Vida</span>
                    </div>
                </div>
            </Card>
        </div>
    </div>
</section>

<script>
    import { gsap } from "gsap";
    import { ScrollTrigger } from "gsap/ScrollTrigger";

    gsap.registerPlugin(ScrollTrigger);

    document.addEventListener("DOMContentLoaded", () => {
        const section = document.getElementById("testimonials");

        if (section) {
            gsap.from(".fade-up-testimonials", {
                scrollTrigger: {
                    trigger: ".section-header",
                    start: "top 80%",
                },
                y: 30,
                opacity: 0,
                duration: 0.8,
                stagger: 0.2,
                ease: "power2.out",
            });

            gsap.from(".testimonial-card-anim", {
                scrollTrigger: {
                    trigger: ".testimonials-grid",
                    start: "top 75%",
                },
                y: 50,
                opacity: 0,
                duration: 0.8,
                stagger: 0.2,
                ease: "power2.out",
            });
        }
    });
</script>

<style>
    #testimonials {
        padding: 100px 0;
        background-color: var(--color-bg-surface);
    }
    .testimonials-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 30px;
        justify-content: center;
    }

    .section-header {
        text-align: center;
        margin-bottom: 3rem;
    }
    .section-desc {
        max-width: 600px;
        margin: 1rem auto;
        color: var(--color-text-secondary);
    }
    .stars {
        color: #ffc107;
        margin-bottom: 1rem;
        font-size: 0.9rem;
    }
    .testimonial-text {
        font-style: italic;
        margin-bottom: 20px;
        color: var(--color-text-light);
        position: relative;
        z-index: 1;
        line-height: 1.6;
    }
    .testimonial-author {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-top: auto;
    }
    .author-info h4 {
        margin-bottom: 2px;
        font-weight: 700;
        color: var(--color-heading);
    }
    .author-role {
        font-size: 0.85rem;
        color: var(--color-primary);
        font-weight: 500;
    }

    @media (max-width: 768px) {
        .testimonial-author {
            flex-direction: column;
            align-items: flex-start;
        }
    }
</style>
